<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">

    <title>LSPECT | Documentation by Author Manu Francis</title>

    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/stroke.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/prettyPhoto.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="js/syntax-highlighter/styles/shCore.css" media="all">
    <link rel="stylesheet" type="text/css" href="js/syntax-highlighter/styles/shThemeRDark.css" media="all">

    <!-- CUSTOM -->
    <link rel="stylesheet" type="text/css" href="css/custom.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <div class="container">

            <section id="top" class="section docs-heading">

                <div class="row">
                    <div class="col-md-12">
                        <div class="big-title text-center">
                            <h1>LSPECT.jl</h1>
                            <p class="lead">Julia package for LSPECT simulation and reconstruction</p>
                        </div>
                        <!-- end title -->
                    </div>
                    <!-- end 12 -->
                </div>
                <!-- end row -->

                <hr>

            </section>
            <!-- end section -->

            <div class="row">

                <div class="col-md-3">
                    <nav class="docs-sidebar" data-spy="affix" data-offset-top="300" data-offset-bottom="200" role="navigation">
                        <ul class="nav">
                            <li><a href="#line1">Getting Started</a></li>
                            <li><a href="#line2">How to Install Paackage</a></li>
                            <li><a href="#line3">Dependecies</a></li>
                            <li><a href="#line4">Parallel Hole SPECT</a></li>
                            <li><a href="#line5">Lightfield SPECT</a></li>
                            <!-- <li><a href="#line6">Reconstruction Algorithms</a></li> -->
                            <li><a href="#line7">Reconstruction Algorithms</a>
                                <ul class="nav">
                                    <li><a href="#line7_1">Probabilistci Programming</a></li>
                                    <li><a href="#line7_2">MLEM</a></li>
                                    <li><a href="#line7_3">MAP</a></li>
                                    <li><a href="#line7_4">Variational Inference</a></li>
                                </ul>
                            </li>
                            <li><a href="#line8">Support</a></li>
                            <li><a href="#line9">Files & Sources</a></li>
                            <li><a href="#line10">Version History (Changelog)</a></li>
                            <li><a href="#line11">Copyright and license</a></li>
                        </ul>
                    </nav >
                </div>
                <div class="col-md-9">
                    <section class="welcome">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Introduction<hr></h2>
                                <div class="row">

                                    <div class="col-md-12 full">
                                        <div class="intro1">
                                            <ul>
                                                <li><strong>LSPECT : </strong>Julia Package for SPECT Imaging</li>
                                                <li><strong>Item Version : </strong> v 1.0</li>
                                                <li><strong>Author  : </strong> <a href="#" target="_blank">Manu Francis</a></li>
                                                <!-- <li><strong>Support Forum : </strong> <a href="https://support.surjithctly.in/forums" target="_blank">https://support.surjithctly.in/forums</a></li> -->
                                                <li><strong>License : </strong> <a href="#" target="_blank">MIT License</a></li>
                                            </ul>
                                        </div>

                                        <hr>
                                        <div>
                                            <p><strong><i>LSPECT</i></strong> package is developed as a complete package for SPECT simulation and reconstruction. Simulation is currently implemented for parallel hole SPECT anf Lightfield SPECT. Moreover, the reconstruction algorithms based on probabilistic programming, MLEM, MAP and Variational inference are included in this package
                                            </p>
                                            <p>This documentation is to help you regarding the usage of LSPECT system. Please go through the documentation carefully to understand how this package is developed for SPECT imaging. Basic Julia knowledge and  probabilistic concept is required to use this package. You may learn basics of Julia and Turing packages <a href="https://julialang.org/learning/" target="_blank">here</a> and <a href="https://turing.ml/dev/" target="_blank">here</a>. </p>

                                            <h4>Requirements</h4>
                                            <p>You will need the following packages installed in <i><strong>Julia  version 1.3</strong></i> or higher to customize this package.</p>
                                            <ol>
                                                <li>Bijectors v0.7.2</li>
                                                <li>Distributions v0.23.2</li>
                                                <li>DistributionsAD v0.5.3</li>
                                                <li>Flux v0.8.3</li>
                                                <li>ForwardDiff v0.10.12</li>
                                                <li>LazyArrays v0.16.16</li>
                                                <li>LineSearches v7.0.1</li>
                                                <li>MCMCChains v3.0.12</li>
                                                <li>Memoization v0.1.4</li>
                                                <li>Optim v0.22.0</li>
                                                <li>Plots v1.6.0</li>
                                                <li>ReverseDiff v1.4.2</li>
                                                <li>TimerOutputs v0.5.6</li>
                                                <li>Tracker v0.2.11</li>
                                                <li>Turing v0.13.0</li>
                                                <li>VoxelRayTracers v0.1.4[https://github.com/efmanu/VoxelRayTracers.jl/tree/fix-AD-error]</li>
                                                <li>Zygote v0.4.22</li>
                                                <li>Distributed</li>
                                                <li>InteractiveUtils</li>
                                                <li>LinearAlgebra</li>
                                                <li>Random</li>
                                                <li>SparseArrays</li>
                                                <li>Statistics</li>
                                                <li>Test</li>
                                            </ol>
                                            <!-- <div class="intro2 clearfix">
                                                <p><i class="fa fa-exclamation-triangle"></i> Be careful while editing the template. If not edited properly, the design layout may break completely.
                                                    <br> No support is provided for faulty customization.
                                                </p>
                                            </div> -->

                                        </div>
                                    </div>

                                </div>
                                <!-- end row -->
                            </div>
                        </div>
                    </section>
                    <!-- end section -->
                    <section id="line1" class="section">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Getting Started <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <p>You can use LSPECT package simply as below:</p>
                                <div>
                                    <h4>Testing</h4>
                                    <pre class="brush: html">
                                        using LSPECT
                                        LSPECT.test_func(100)
                                    </pre>
                                </div>
                                <div>
                                    <h4>Parameter Settings</h4>
                                </div>
                                <p>Before starting simulation or reconstruction, we need to add system configuration in <strong><i>param_settings.jl</i></strong> file. The template of this file can be found in the test folder of LSPECT package. Or You can copy and paste the following code and save as <strong><i>param_settings.jl</i></strong>.</p>
                                <pre class="brush: html">
                                    mutable struct plain_offset
                                    horizontal::Float64
                                    vertical::Float64
                                    end;
                                    mutable struct grid3D_cube
                                    nx::Int
                                    ny::Int
                                    nz::Int
                                    minBound::Vector{Float64}
                                    maxBound::Vector{Float64}
                                    dx::Float64
                                    dy::Float64
                                    dz::Float64
                                    end;
                                    mutable struct sphere_details
                                    radius::Vector{Float64}
                                    x_shift::Vector{Float64}
                                    y_shift::Vector{Float64}
                                    z_shift::Vector{Float64}
                                    sphere_color::Vector{Char}
                                    transperancy::Vector{Float64}
                                    points::Vector{Int}
                                    spot_color::Vector{Char}
                                    spot_transperancy::Vector{Float64}
                                    no_of_radiation_spots::Vector{Int}
                                    end;
                                    mutable struct params_list
                                    base_fld::String#base folder location
                                    date::String #date

                                    #enable visualization 1 to enable 0 to disable
                                    vis_enable::Bool
                                    #pinhole thickness
                                    pin_thickness::Float64
                                    shape_type::String

                                    #pinhole plane details
                                    distance::Float64
                                    dir_axis::Char
                                    act_plain_width::Float64 #actual width in case of modular detector
                                    plain_width::Float64
                                    plain_height::Float64
                                    plain_width_half::Float64
                                    plain_height_half::Float64
                                    plain_color::Char
                                    plain_transp::Float64
                                    offset::plain_offset

                                    #radiation details
                                    ray_length::Float64
                                    angle_step::Float64

                                    #shift for rotation center
                                    axis_shift::Float64

                                    #detector details
                                    detector_dir_axis::Char
                                    act_detector_width::Float64 #actual width in case of modular detector
                                    detector_width::Float64
                                    detector_height::Float64
                                    detector_width_half::Float64
                                    detector_height_half::Float64
                                    detector_plain_color::Char
                                    detector_transp::Float64

                                    #detector pixel details
                                    pixel_width::Float64
                                    pixel_height::Float64
                                    pixel_width_half::Float64
                                    pixel_height_half::Float64
                                    pix_total_rows::Int
                                    pix_total_cols::Int

                                    #cubical area of interest details
                                    grid3D::grid3D_cube
                                    slice_no::Int
                                    spots::Int

                                    sphere::sphere_details


                                    end;
                                    function params_list(plane_width, pixel_width, nvoxels, voxel_min, voxel_max)
                                    voxel_size = (voxel_max - voxel_min)/nvoxels
                                    return params = params_list(
                                        pwd(), # base_fld#base folder location
                                        "14-Jan-2020",# date #date
                                        # #enable visualization 1 to enable 0 to disable
                                        0,# vis_enable
                                        # #pinhole thickness
                                        0.5,# pin_thickness
                                        "sphere",# shape_type

                                        # #detector details
                                        20,# distance
                                        'Y',# dir_axis
                                        # 49.152,# act_plain_width #actual width in case of modular detector
                                        # 49.152,# plain_width
                                        # 49.152,# plain_height
                                        # 24.576,# plain_width half
                                        # 24.576,# plain_height half
                                        plane_width,# act_plain_width #actual width in case of modular detector
                                        plane_width,# plain_width
                                        plane_width,# plain_height
                                        plane_width/2,# plain_width half
                                        plane_width/2,# plain_height half
                                        'y',# plain_color
                                        0.2,# plain_transp
                                        plain_offset(
                                              0,
                                              0
                                        ),# offset::detector_offset
                                        # #radiation details
                                        150,# ray_length
                                        30,# angle_step
                                        #
                                        # #shift for rotation center
                                        0,# axis_shift
                                        #
                                        # #detector details
                                        'Y',# detector_dir_axis
                                        # 49.152,# act_detector_width #actual width in case of modular detector
                                        # 49.152,# detector_width
                                        # 49.152,# detector_height
                                        # 24.576, # detector_width half
                                        # 24.576,# detector_height half
                                        # 'm',# detector_plain_color
                                        # 0.3,# detector_transp
                                        # #
                                        # # #detector pixel details
                                        # 0.048,# pixel_width
                                        # 0.048,# pixel_height
                                        # 0.024,# pixel_width_half
                                        # 0.024,# pixel_height_half
                                        plane_width,# act_detector_width #actual width in case of modular detector
                                        plane_width,# detector_width
                                        plane_width,# detector_height
                                        plane_width/2,# detector_width_half
                                        plane_width/2,# detector_height_half
                                        'm',# detector_plain_color
                                        0.3,# detector_transp
                                        #
                                        # #detector pixel details
                                        pixel_width,# pixel_width
                                        pixel_width,# pixel_height
                                        pixel_width/2,# pixel_width_half
                                        pixel_width/2,# pixel_height_half
                                        floor(plane_width/pixel_width),#pix_total_rows
                                        floor(plane_width/pixel_width),#pix_total_cols
                                        #cubical area of interest details
                                        grid3D_cube(
                                              # 128,# nx
                                              # 128,# ny
                                              # 128,# nz
                                              # [-15; -15; -15],# minBound
                                              # [15; 15; 15],# maxBound
                                              # 0.234375,# dx
                                              # 0.234375,# dy
                                              # 0.234375# dz
                                              nvoxels,# nx
                                              nvoxels,# ny
                                              nvoxels,# nz
                                              [voxel_min; voxel_min; voxel_min],# minBound
                                              [voxel_max; voxel_max; voxel_max],# maxBound
                                              voxel_size,# dx
                                              voxel_size,# dy
                                              voxel_size# dz
                                        ),
                                        65,# slice_no
                                        10000,# spots
                                        #
                                        sphere_details(
                                              [0.5],# radius
                                              [0],# x_shift
                                              [0],# y_shift
                                              [0],# z_shift
                                              ['r'],# sphere_color
                                              [0.2],# transperancy
                                              [30],# points
                                              ['c'],# spot_color
                                              [0.3],# spot_transperancy
                                              [10000]# no_of_radiation_spots
                                        )# sphere:sphere_details
                                    );
                                    end

                                    nvoxels = 8
                                    npixels = nvoxels
                                    plane_width = 4.0
                                    pixel_width = (4.0/npixels)
                                    voxel_min = -2.0
                                    voxel_max = 2.0

                                    params = params_list(plane_width, pixel_width, nvoxels, voxel_min, voxel_max)

                                </pre>                                
                                <p>Based on your system configuration, modify detector width and cube of interest for the reconstruction. If your the cube of interest for reconstruction contains 64x64x64 voxels, set  <i>nvoxels = 8</i>. Similarly for to set detector width to 15mm modify, <i>plane_width = 15.0</i>. The cube of interest minimum and maximum bound at 4mm, you can modify  <i>voxel_min = -24.0</i> and  <i>voxel_min = 4.0</i>. If the detector contains 100x100 pixels, you can set <i>npixels =100</i>.</p>

                                <!-- <pre class="brush: html">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                                                YOUR CODES GOES HERE
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                                                YOUR CODES GOES HERE
                                            </div>
                                            <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                                                YOUR CODES GOES HERE
                                            </div>
                                        </div>
                                    </div>
                                </pre> -->
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                    </section>
                    <!-- end section -->
                </div>
                <!-- // end .col -->

            </div>
            <!-- // end .row -->

        </div>
        <!-- // end container -->

    </div>
    <!-- end wrapper -->

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/retina.js"></script>
    <script src="js/jquery.fitvids.js"></script>
    <script src="js/wow.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>

    <!-- CUSTOM PLUGINS -->
    <script src="js/custom.js"></script>
    <script src="js/main.js"></script>

    <script src="js/syntax-highlighter/scripts/shCore.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushXml.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushCss.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushJScript.js"></script>

</body>

</html>
